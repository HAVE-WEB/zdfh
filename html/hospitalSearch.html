<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>医院查询</title>

    <!-- Set render engine for 360 browser -->
    <meta name="renderer" content="webkit">

    <!-- No Baidu Siteapp-->
    <meta http-equiv="Cache-Control" content="no-siteapp"/>

    <link rel="icon" type="image/png" href="i/favicon.png">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="i/app-icon72x72@2x.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Amaze UI"/>
    <link rel="apple-touch-icon-precomposed" href="i/app-icon72x72@2x.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="i/app-icon72x72@2x.png">
    <meta name="msapplication-TileColor" content="#0e90d2">

    <!-- Amaze UI CSS -->
    <link rel="stylesheet" href="../assets/css/amazeui.css">
    <link rel="stylesheet" href="../assets/css/sl.css">
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/amazeui.js"></script>
    <style>

    </style>
</head>
<body class="sl-background-color-white" style="height: 100%">
<div class="am-g sl-flex-row-center-space-between sl-background-color-F1F1F1">
    <div class="am-u-sm-9 am-u-md-9 am-u-lg-3">
        查询医院
    </div>
    <div class="am-u-sm-3 am-u-md-3 am-u-lg-3 sl-flex-column-center-center">
        <button type="submit" class="am-btn am-btn-default am-btn-warning"  id="button">确认</button>
    </div>
</div>

<div class="am-g sl-border-bottom-1px-solid-white sl-background-color-F1F1F1 sl-padding-top-10px sl-flex-row-center-space-between" >
    <div class="am-u-sm-9 am-u-md-9 am-u-lg-9 " >
        <div class="sl-flex-row-center-flex-start sl-background-color-white">
            <i class="am-icon-search sl-icon-color-CACACA" style="width: 10%;"></i>
            <input type="text" placeholder="按医院名称搜索" id="search" style="width: 80%;" oninput="inputVal()">
            <i class="am-icon-close am-icon-sm sl-icon-color-CACACA" style="display: none; width: 10%;" id="clearVal"></i>
        </div>
    </div>
    <div class="am-u-sm-3 am-u-md-3 am-u-lg-3 sl-flex-column-center-center " style="height: 100%">
        <button type="submit" class="am-btn am-btn-default am-btn-warning"  id="search-hospital">查询</button>
    </div>
</div>
<form >
    <ul class="am-list sl-margin-10px-10px" id="list1" style="display: block">
        <li class="sl-flex-row-center-space-between sl-padding-top-10px"  style="display: flex;"><span>1 或深或浅，盖上布，以为不存在。</span><input type="radio" name="list" value="option1" ></li>
        <li class="sl-flex-row-center-space-between sl-padding-top-10px" style="display: flex;"><span >2自己走不出来，别人也闯不进去。</span><input type="radio" name="list" value="option2"></li>
        <li class="sl-flex-row-center-space-between sl-padding-top-10px" style="display: flex;"><span >3 或深或浅，盖上布，以为不存在。</span><input type="radio" name="list" value="option3"></li>
        <li class="sl-flex-row-center-space-between sl-padding-top-10px" style="display: flex;"><span >4自己走不出来，别人也闯不进去。</span><input type="radio" name="list" value="option4"></li>
        <li class="sl-flex-row-center-space-between sl-padding-top-10px" style="display: flex;"><span >5 或深或浅，盖上布，以为不存在。</span><input type="radio" name="list" value="option5"></li>
        <li class="sl-flex-row-center-space-between sl-padding-top-10px" style="display: flex;"><span >6自己走不出来，别人也闯不进去。</span><input type="radio" name="list" value="option6"></li>
    </ul>
    <ul class="am-list sl-margin-10px-10px" style="display: none;" id="list2">
    </ul>

</form>



</body>
<script>
    //显示和隐藏close按钮
    function inputVal() {
        console.log("start")

        if($("#search").val() !== ""){
            $("#search").next().css("display","block");
        }else{
            $("#search").next().css("display","none");
            $("#list1").css('display','block');
            $("#list2").css('display','none').empty()
        }
        console.log("end")
    }
    //清除input中的内容
    $("#clearVal").click(function () {
        $("#search").val("");
        $(this).css("display","none");
        $("#list1").css('display','block');
        $("#list2").css('display','none').empty()
    })
    //点击文本，radio获取焦点
//    $(".am-list:visible li").click(function () {
//        $(this).find("input[type=radio]").attr("checked","checked");
//    })
//    $("#list2 li").on("click",function () {
//        $(this).find("input[type=radio]").attr("checked","checked");
//    })
    //点击确认按钮，跳转页面传输数据
    $("#button").click(function () {
        $(".am-list:visible input").each(function (i ,v) {
            //console.log("i:"+i+",v"+v);
            //console.log("B:"+($(".am-list:visible").css('display')== "block")+"V:"+($(this).attr("checked") )+"D:"+$("input:radio:checked").val())
            if($("input:radio:checked").val() !=undefined ){
                alert("i:"+i);
               var result =  $(this).prev().html();
               var url= "user-info.html?result="+result;
                location.href=encodeURI(url);
                return false
            }else {
                if(i == $(".am-list:visible input").length-1){
                    alert("请选择一条数据");
                }
            }
        })
    });
    //点击查询按钮
    $("#search-hospital").click(function () {
        var val = $("#search").val();
        var tempArr=[];
        if($.trim(val) !== ""){
            $("#list1 span").each(function (i,v) {
                 if(v.innerHTML.indexOf($.trim(val)) != -1){
                    tempArr.push(v.innerHTML);
                 }
             })
            var li = '';
            for(var i=0;i<tempArr.length;i++){
                 var li1 =' <li class="sl-flex-row-center-space-between sl-padding-top-10px"  style="display: flex;"><span>'+tempArr[i]+'</span><input type="radio" name="radio" value="option'+i+'"></li>'
                li+=li1;
            }
           $("#list2").empty().append(li).css('display','block').attr('disabled',false);
           $("#list1").css({display:'none'}).attr('disabled',true);

        }else{
            alert("请输入查询条件")
        }
    })

</script>
</html>